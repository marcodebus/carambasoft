function View360UtilStatic(){this.getElementById=function(t){return document.getElementById(t)},this.getFirstElementByClassName=function(t,i){var e=this.getElementsByClassName(t,i);return e[0]},this.getElementsByClassName=function(t,i){return t.getElementsByClassName?t.getElementsByClassName(i):t.querySelectorAll?t.querySelectorAll("."+i):document.querySelectorAll?document.querySelectorAll("."+i):void 0},this.addEvent=function(t,i,e,s){return t.addEventListener?t.addEventListener(i,e,s):t.attachEvent?t.attachEvent("on"+i,e):void 0},this.removeEvent=function(t,i,e){return t.addEventListener?t.removeEventListener(i,e):t.detachEvent?t.detachEvent("on"+i,e):void 0},this.setAttribute=function(t,i,e){t.setAttribute?t.setAttribute(i,e):t[i]=e},this.hasClass=function(t,i){return t.className.match(new RegExp("(\\s|^)"+i+"(\\s|$)"))},this.addClass=function(t,i){this.hasClass(t,i)||(t.className+=" "+i)},this.removeClass=function(t,i){if(this.hasClass(t,i)){var e=new RegExp("(\\s|^)"+i+"(\\s|$)");t.className=t.className.replace(e," ")}},this.pad=function(t,i){for(var e=t+"";e.length<i;)e="0"+e;return e},this.loadJSON=function(t,i,e){var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&(200===s.status?i&&i(JSON.parse(s.responseText)):e&&e(s))},s.open("GET",t,!0),s.send()}}function View360Loader(t){this.sources=t,this.directory,this.callbackOne=function(){},this.callbackAll=function(){},this.callbackEach=function(){},this.callbackOn={},this.images=[],this.totalImages,this.setDirectory=function(t){this.directory=t},this.setSources=function(t){this.sources=t},this.setCallbackOne=function(t,i){this.callbackOne=t,this.urlOne=i},this.setCallbackAll=function(t){this.callbackAll=t},this.setCallbackEach=function(t){this.callbackEach=t},this.setCallbackProgress=function(t){this.callbackProgress=t},this.setCallbackOn=function(t,i){this.callbackOn[t]=i},this.loadFirstNum=function(t){this.loadFirstNum=t},this.start=function(){var t=this;this.loadImages(0,this.sources.length-1,function(i,e){t.callbackOne(i,e)},function(i,e){t.callbackAll(i,e)},function(i){t.callbackProgress(i)},function(i,e){t.callbackEach(i,e)})},this.getImages=function(){return this.images},this.loadOne=function(){var t=this,i=new Image;i.onload=function(i){t.callbackOne(i.currentTarget,!1)},i.src=this.directory+"/"+this.urlOne},this.loadImages=function(t,i,e,s,n,o){for(var a=this,l=0,r=0,h=0,r=i-t+1,d=t;i>=d;d++)this.images[d]=new Image,this.images[d].onload=function(t){l++,l>=r&&s(a.images,h),o(t.currentTarget,!1);var i=Math.ceil(l/r*100);n({loaded:l,total:r,error:h,percent:i})},this.images[d].onerror=function(t){h++,++l>=r&&s(a.images,h),o(t.currentTarget,!0);var i=Math.ceil(l/r*100);n({loaded:l,total:r,error:h,percent:i})},this.images[d].src=this.directory+"/"+this.sources[d]}}var View360=function(t){this.consObj=t,this.navigationConfig={btnWidth:40,btnHeight:40,btnMargin:5,showButtons:!0,showTool:!0,showMove:!0,showRotate:!0,showPlay:!0,showPause:!0,showZoom:!0,showTurn:!0,turnSpeed:40,showFullscreen:!0,showClose:!0,align:"center",orientation:"horizontal",type:"square",cornerRadius:20,btnImageSize:"100%"},this.config={verticalAngles:{from:15,to:45,initial:15},horizontalAngles:{from:0,to:360,initial:0},opacity:1,mode:"fixed",width:620,height:350,fitmode:"left-right",oneTurnOnStartUp:!0,autoRotate:!1,autoRotateDirection:1,autoRotateSpeed:50,autoRotateStopOnMove:!0,zoomMultipliers:[1,1.2,1.5,2,3],loadFullSizeImagesOnZoom:!0,loadFullSizeImagesOnFullscreen:!0,initialImage:0,imagesDirectory:".",fullSizeImagesDirectory:"",images:[],autoLoadImages:!0,imagesPattern:"image_%COL_%ROW.jpg",imagesNumbering:0,showTurnMeOn:!1,rows:1,columns:36,xAxisSensitivity:10,yAxisSensitivity:40,inertiaConstant:10,panInBounds:!1,playBtnMode:"loop",opositeDirection:!1,loadOnPageLoad:!1,firstImageOpacity:.5,loadFirstImage:!0,imagesNumberingUpDown:0},this.loaderInfoClass=View360LoadingInfo,this.loaderInfoConfig={},this.fullSizeLoaderInfoClass=View360LoadingInfo,this.fullSizeLoaderInfoConfig={display:!1,holderClassName:"View360-fullSizeLoader",circleLineWidth:25,circleLineColor:"#AAAAAA",modalOpacity:0,loadingTitle:"Loading fullsize images...",circleWidth:50},this.addCloseToDom=function(t){t.innerHTML+=this.closeButtons.close},this.addNavButtonsToDom=function(t){for(var i="",e=0;e<this.navButtonsOrder.length;e++){var s=this.navButtonsOrder[e];i+=this.navButtons[s]}t.innerHTML=i},this.addNavButton=function(t,i){this.navButtons[t]=i,this.navButtonsOrder.push(t)},this.navButtons={rotate:'<div class="View360-navigationRotate View360-navigationBtn"></div>',move:'<div class="View360-navigationHand View360-navigationBtn"></div>',play:'<div class="View360-navigationPlay View360-navigationBtn"></div>',pause:'<div class="View360-navigationPause View360-navigationBtn"></div>',"turn-left":'<div class="View360-navigationTurnLeft View360-navigationBtn"></div>',"turn-right":'<div class="View360-navigationTurnRight View360-navigationBtn"></div>',"zoom-in":'<div class="View360-navigationZoomIn View360-navigationBtn"></div>',"zoom-out":'<div class="View360-navigationZoomOut View360-navigationBtn"></div>',fullscreen:'<div class="View360-navigationFullscreenEnter View360-navigationBtn"></div><div class="View360-navigationFullscreenExit View360-navigationBtn"></div>'},this.closeButtons={close:'<div class="View360-navigationClose View360-navigationBtn"></div>'},this.navButtonsOrder=["rotate","move","play","pause","turn-left","turn-right","zoom-in","zoom-out","fullscreen"],this.setNavButtonsOrder=function(t){this.navButtonsOrder=t},this.htmlTemplate=" ",this.htmlTemplate+='   <div class="View360-holder"> ',this.htmlTemplate+='       <div class="View360-canvasHolder"> ',this.htmlTemplate+='           <canvas class="View360-canvas"></canvas> ',this.htmlTemplate+="       </div> ",this.htmlTemplate+='       <div class="View360-borderHolder View360-loadingBackground"></div> ',this.htmlTemplate+='       <div class="View360-loaderHolder"></div> ',this.htmlTemplate+='       <div class="View360-fullSizeLoaderHolder"></div> ',this.htmlTemplate+='       <div class="View360-clickableArea"></div> ',this.htmlTemplate+='<div class="View360-turnMeOnHolder"><div class="View360-turnMeOn"></div></div>',this.htmlTemplate+='<div class="View360-closeHolder">',this.htmlTemplate+="</div> ",this.htmlTemplate+='<div class="View360-navigationHolder">',this.htmlTemplate+='<div class="View360-navigation">',this.htmlTemplate+="</div> ",this.htmlTemplate+="</div> ",this.htmlTemplate+='       <div class="View360-close"></div> ',this.htmlTemplate+="   </div>",this.globalPanMoveX=0,this.globalPanMoveY=0,this.currentPanMoveX=0,this.currentPanMoveY=0,this.currentZoom=1,this.isFullscreen=!1,this.ctx=null,this.totalImages=0,this.cols,this.rows,this.totalImages,this.autoRotatePaused=!1,this.mouseDown=!1,this.refMouseX,this.refMouseY,this.refCol,this.refRow,this.currentCol=0,this.currentRow=0,this.refCol=this.currentCol,this.refRow=this.currentRow,this.autoCol=0,this.images=[],this.clickableAreaObj=null,this.oldBodyOverflowX="unset",this.rememberInertiaInterval=null,this.inertiaStatesArr=[],this.stopRememberInertiaInterval=function(){clearInterval(this.rememberInertiaInterval)},this.inertiaPrevStateX=null,this.inertiaPrevStateY=null,this.allowInertia=!1,this.startRememberInertiaInterval=function(){var t=this;this.inertiaStatesArr=[],this.rememberInertiaInterval=setInterval(function(){t.inertiaPrevStateX==t.currentMoveX&&t.inertiaPrevStateY==t.currentMoveY?t.allowInertia=!1:t.allowInertia=!0,t.inertiaPrevStateX=t.currentMoveX,t.inertiaPrevStateY=t.currentMoveY},30)},this.rememberInertiaStates=function(){var t=this;0==t.inertiaStatesArr.length&&(t.inertiaStatesArr.push({moveX:t.currentMoveX,moveY:t.currentMoveY}),t.inertiaStatesArr.push({moveX:t.currentMoveX,moveY:t.currentMoveY}),t.inertiaStatesArr.push({moveX:t.currentMoveX,moveY:t.currentMoveY}),t.inertiaStatesArr.push({moveX:t.currentMoveX,moveY:t.currentMoveY}),t.inertiaStatesArr.push({moveX:t.currentMoveX,moveY:t.currentMoveY}));({moveX:t.currentMoveX,moveY:t.currentMoveY});t.inertiaStatesArr.push({moveX:t.currentMoveX,moveY:t.currentMoveY}),t.inertiaStatesArr.shift()},this.inertiaAutoMoveInterval=null,this.startInertiaAutoMoveInterval=function(t){var i=this;if(t)var e=24;else{if(!this.allowInertia)return void(this.autoRotatePaused=!1);this.stopInertiaAutoMoveInterval();try{var e=i.inertiaStatesArr[i.inertiaStatesArr.length-1].moveX-i.inertiaStatesArr[0].moveX;if(0==e)return}catch(s){return}e/=10,e=i.getDirection(e)*Math.min(15,Math.abs(e))}this.refCol=this.currentCol,this.refRow=this.currentRow;var n=Math.abs(e),o=1.5,a=n*o,l=0,r=6,h=10,d=0;this.inertiaAutoMoveInterval=setInterval(function(){var t=a/r;d+=t,a-=t,l+=1,l>6*r&&(i.autoRotatePaused=!1,clearInterval(i.inertiaAutoMoveInterval)),i.autoColMove(i.getDirection(e)*Math.round(d))},h)},this.stopInertiaAutoMoveInterval=function(){clearInterval(this.inertiaAutoMoveInterval)},this.autoColMove=function(t){if(0!=t){var i=-1;this.currentCol=(this.refCol+i*t)%this.cols,this.currentCol=this.currentCol<0?this.currentCol+this.cols:this.currentCol,this.autoCol=this.currentCol;var e=this.getIdxByColRow(this.currentCol,this.currentRow);this.displayImageByIdx(e)}},this.mouseDownHandler=function(t,i){var e=this;this.config.hideOnMouseTurnMeOn&&V360Util.addClass(this.turnMeOnHolder,"View360-opacity0"),this.config.autoRotateStopOnMove&&this.stopAutoRotate(),this.stopInertiaAutoMoveInterval(),this.startRememberInertiaInterval(),this.refCol=this.currentCol,this.refRow=this.currentRow,this.refMouseX=t,this.refMouseY=i,this.mouseDown||(this.autoRotatePaused=!0,this.mouseDown=!0,V360Util.removeEvent(document,"touchmove",this.touchMoveHandlerListener),this.touchMoveHandlerListener=function(t){t.touches.length>1||(t.preventDefault(),e.mouseMoveHandler(t.touches[0].pageX,t.touches[0].pageY))},V360Util.addEvent(document,"touchmove",this.touchMoveHandlerListener,!1),V360Util.removeEvent(document,"mousemove",this.mouseMoveHandlerListener),this.mouseMoveHandlerListener=function(t){e.mouseMoveHandler(t.pageX,t.pageY)},V360Util.addEvent(document,"mousemove",this.mouseMoveHandlerListener,!1),V360Util.removeEvent(document,"mouseup",this.mouseUpHandlerListener),V360Util.removeEvent(this.clickableAreaObj,"touchend",this.mouseUpHandlerListener),this.mouseUpHandlerListener=function(t){e.mouseUpHandler(t)},V360Util.addEvent(document,"mouseup",this.mouseUpHandlerListener,!1),V360Util.addEvent(this.clickableAreaObj,"touchend",this.mouseUpHandlerListener,!1))},this.setRelativePosition=function(t,i){this.globalPanMoveX=t,this.globalPanMoveY=i},this.mouseUpHandler=function(t){t.stopPropagation(),this.mouseDown=!1,this.currentPanMoveX=0,this.currentPanMoveY=0,this.isPanMode()&&(this.globalPanMoveX=-((this.zoomedXPosMoved-this.zoomedXPosCentered-this.panMoveEmptyX)/this.currentZoom),this.globalPanMoveY=-((this.zoomedYPosMoved-this.zoomedYPosCentered-this.panMoveEmptyY)/this.currentZoom),this.panMoveEmptyX=0,this.panMoveEmptyY=0),V360Util.removeEvent(document,"mousemove",this.mouseMoveHandlerListener),V360Util.removeEvent(document,"touchmove",this.touchMoveHandlerListener),V360Util.removeEvent(document,"mouseup",this.mouseUpHandlerListener),V360Util.removeEvent(this.clickableAreaObj,"touchend",this.mouseUpHandlerListener),this.stopRememberInertiaInterval(),this.startInertiaAutoMoveInterval()},this.setMoveMode=function(t){this.moveMode=t},this.isPanMode=function(){return"PAN"==this.moveMode},this.isRotate=function(){return"ROTATE"==this.moveMode},this.mouseMoveHandler=function(t,i){if(this.smallLoaded){if(this.isPanMode())return this.currentPanMoveX=this.refMouseX-t,this.currentPanMoveY=this.refMouseY-i,void this.displayCurrentImage();var e=this.currentMoveX=this.refMouseX-t,s=this.currentMoveY=this.refMouseY-i;this.moveObjectByXY(e,s),this.rememberInertiaStates()}},this.moveObjectByXY=function(t,i){if(0!==t){var e=-this.getDirection(t),s=Math.floor(Math.abs(t)/this.config.xAxisSensitivity);this.currentCol=(this.refCol+e*s)%this.cols,this.currentCol=this.currentCol<0?this.currentCol+this.cols:this.currentCol}if(0!==i){var n=-this.getDirection(i),o=Math.floor(Math.abs(i)/this.config.yAxisSensitivity);this.currentRow=this.refRow+n*o,this.currentRow=Math.min(this.rows-1,this.currentRow),this.currentRow=Math.max(0,this.currentRow)}this.autoCol=this.currentCol;var a=this.getIdxByColRow(this.currentCol,this.currentRow);this.displayImageByIdx(a)},this.getIdxByColRow=function(t,i){return t+i*this.cols},this.getDirection=function(t){return t>=0?1:-1},this.autoRotateFunc=function(t){var i=t?t:this.config.autoRotateDirection;1==i?(this.autoCol==this.cols-1&&(this.autoCol=-1),this.autoCol++):(0==this.autoCol&&(this.autoCol=this.cols-1),this.autoCol--),this.currentCol=this.autoCol;var e=this.getIdxByColRow(this.autoCol,this.currentRow);this.displayImageByIdx(e),"loop"!=this.config.playBtnMode&&this._isPlayBtn&&("oneloop"==this.config.playBtnMode?(this._oneLoopCount++,this._oneLoopCount>=this.cols&&this.stopAutoRotate()):"firstimage"==this.config.playBtnMode?0==this.autoCol&&this.stopAutoRotate():"lastimage"==this.config.playBtnMode?this.autoCol==this.cols-1&&this.stopAutoRotate():parseInt(this.config.playBtnMode)==this.config.playBtnMode&&this.autoCol==parseInt(this.config.playBtnMode)&&this.stopAutoRotate())},this.setRow=function(t){if(this.smallLoaded){this.currentRow=t<this.config.rows?t:t%this.config.rows;var i=this.getIdxByColRow(this.currentCol,this.currentRow);this.displayImageByIdx(i)}},this.setColumn=function(t){if(this.smallLoaded){t=Math.abs(t)<this.config.columns?t:t%this.config.columns,0>t&&(t=this.config.columns+t),this.currentCol=t;var i=this.getIdxByColRow(this.currentCol,this.currentRow);this.displayImageByIdx(i)}},this.minMax=function(t,i,e){return t=Math.min(t,e),t=Math.max(t,i)},this.setVerticalAngle=function(t){t=Math.abs(t),t=this.minMax(t,this.config.verticalAngles.from,this.config.verticalAngles.to);var i=t-this.config.verticalAngles.from,e=this.config.verticalAngles.to-this.config.verticalAngles.from,s=i/e*100,n=Math.floor(this.config.rows*(s/100));n=Math.min(n,this.config.rows-1),this.setRow(n)},this.displayCurrentImage=function(){void 0!==this.latestImageIdx&&this.displayImageByIdx(this.latestImageIdx)},this._getFullSizeImageByIdx=function(t){return this.fullSizeImages[t]},this.displayImageByIdx=function(t){this.latestImageIdx=t;var i=this.images[t];if(this.fullSizeImages&&this.fullSizeImages[t]&&this.fullSizeImages[t].complete)var i=this.fullSizeImages[t];this.displayImage(i)},this.displayImage=function(t,i){this.latestImageObj=t,this.fitImageOn(this.canvas,t)},this.panMoveEmptyX=0,this.panMoveEmptyY=0,this.fitImageOn=function(t,i,e){var s,n,o,a,l=i.width/i.height,r=t.width/t.height;l>r?"left-right"==this.config.fitmode||"fit"==this.config.fitmode?(n=t.width,s=i.height*(n/i.width),o=0,a=(t.height-s)/2):(s=t.height,n=i.width*(s/i.height),o=(t.width-n)/2,a=0):r>l?"left-right"==this.config.fitmode?(n=t.width,s=i.height*(n/i.width),o=0,a=(t.height-s)/2):(s=t.height,n=i.width*(s/i.height),o=(t.width-n)/2,a=0):(s=t.height,n=t.width,o=0,a=0);var h=n*this.currentZoom,d=s*this.currentZoom,c=o-(h-n)/2,v=a-(d-s)/2;this.zoomedXPosCentered=c,this.zoomedYPosCentered=v;var u=1;c-=this.currentPanMoveX+this.globalPanMoveX*this.currentZoom*u,v-=this.currentPanMoveY+this.globalPanMoveY*this.currentZoom*u,this.zoomedXPosMoved=c,this.zoomedYPosMoved=v,this.zoomChanged&&(this.zoomChanged=!1,this.globalPanMoveX=-((this.zoomedXPosMoved-this.zoomedXPosCentered)/this.currentZoom),this.globalPanMoveY=-((this.zoomedYPosMoved-this.zoomedYPosCentered)/this.currentZoom));var g=t.getContext("2d");e||g.clearRect(0,0,t.width,t.height),this.config.panInBounds&&(c>0&&(this.panMoveEmptyX=c,c=0),v>0&&(this.panMoveEmptyY=v,v=0),h+c<this.canvas.width&&(this.panMoveEmptyX=c,c=-(h-this.canvas.width),this.panMoveEmptyX-=c),d+v<this.canvas.height&&(this.panMoveEmptyY=v,v=-(d-this.canvas.height),this.panMoveEmptyY-=v)),g.save(),g.globalAlpha=this.config.opacity,g.drawImage(i,c,v,h,d),g.restore()},this.addFullScreenEvents=function(){var t=this;V360Util.removeEvent(window,"resize",this.windowResize),V360Util.removeEvent(document.documentElement,"fullscreenchange",this.fullscreenEnteredListener),V360Util.removeEvent(document,"mozfullscreenchange",this.fullscreenEnteredListener),V360Util.removeEvent(document,"MSFullscreenChange",this.fullscreenEnteredListener,!1),V360Util.removeEvent(document.documentElement,"webkitfullscreenchange",this.fullscreenEnteredListener),this.fullscreenEnteredListener=function(){t.isFullscreen=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement,t.windowResize()},this.windowResize=function(){if(t.isFullscreen){t.disableResponsive=!0,t.latestRWidth=-1;var i=document.getElementsByTagName("body"),e=i[0];"unset"==t.oldBodyOverflowX&&(t.oldBodyOverflowX=e.style.overflowX,t.oldBodyOverflowY=e.style.overflowY),e.style.overflowX="hidden",e.style.overflowY="hidden",t.innerHolder.className="View360-holderFullscreen",document.body.appendChild(t.innerHolder);var s=t.canvas.width/window.innerWidth,n=t.canvas.height/window.innerHeight;t.globalPanMoveX=-((t.zoomedXPosMoved-t.zoomedXPosCentered)/t.currentZoom)/s,t.globalPanMoveY=-((t.zoomedYPosMoved-t.zoomedYPosCentered)/t.currentZoom)/n,V360Util.setAttribute(t.canvas,"width",window.innerWidth),V360Util.setAttribute(t.canvas,"height",window.innerHeight),t.innerHolder.style.width=window.innerWidth+"px",t.innerHolder.style.height=window.innerHeight+"px",t.innerHolder.style.top=window.pageYOffset+"px",t.innerHolder.style.left=window.pageXOffset+"px",t.navigationConfig.showFullscreen&&t.navigationConfig.showButtons&&(V360Util.getFirstElementByClassName(t.innerHolder,"View360-navigationFullscreenEnter").style.display="none",V360Util.getFirstElementByClassName(t.innerHolder,"View360-navigationFullscreenExit").style.display="inline-block"),t.config.loadFullSizeImagesOnFullscreen&&t.startFullSizeImageLoader()}else{t.disableResponsive=!1,t.innerHolder.className="View360-holder",t.holder.appendChild(t.innerHolder);var s=t.canvas.width/t.config.width,n=t.canvas.height/t.config.height;t.globalPanMoveX=-((t.zoomedXPosMoved-t.zoomedXPosCentered)/t.currentZoom)/s,t.globalPanMoveY=-((t.zoomedYPosMoved-t.zoomedYPosCentered)/t.currentZoom)/n,V360Util.setAttribute(t.canvas,"width",t.config.width),V360Util.setAttribute(t.canvas,"height",t.config.height),t.innerHolder.style.width=t.config.width+"px",t.innerHolder.style.height=t.config.height+"px",t.innerHolder.style.top="0px",t.innerHolder.style.left="0px";var i=document.getElementsByTagName("body"),e=i[0];e.style.overflowX=t.oldBodyOverflowX,e.style.overflowY=t.oldBodyOverflowY,setTimeout(function(){e.style.overflowX=t.oldBodyOverflowX,e.style.overflowY=t.oldBodyOverflowY},200),t.navigationConfig.showFullscreen&&t.navigationConfig.showButtons&&(V360Util.getFirstElementByClassName(t.innerHolder,"View360-navigationFullscreenEnter").style.display="inline-block",V360Util.getFirstElementByClassName(t.innerHolder,"View360-navigationFullscreenExit").style.display="none")}void 0!==t.latestImageIdx&&t.displayImageByIdx(t.latestImageIdx)},V360Util.addEvent(window,"resize",this.windowResize,!1),V360Util.addEvent(document.documentElement,"fullscreenchange",this.fullscreenEnteredListener,!1),V360Util.addEvent(document,"mozfullscreenchange",this.fullscreenEnteredListener,!1),V360Util.addEvent(document,"MSFullscreenChange",this.fullscreenEnteredListener,!1),V360Util.addEvent(document.documentElement,"webkitfullscreenchange",this.fullscreenEnteredListener,!1)},this.destroy=function(){V360Util.removeEvent(window,"resize",this.windowResize),V360Util.removeEvent(document.documentElement,"fullscreenchange",this.fullscreenEnteredListener),V360Util.removeEvent(document,"mozfullscreenchange",this.fullscreenEnteredListener),V360Util.removeEvent(document,"MSFullscreenChange",this.fullscreenEnteredListener,!1),V360Util.removeEvent(document.documentElement,"webkitfullscreenchange",this.fullscreenEnteredListener),this.responsiveInterval&&clearInterval(this.responsiveInterval),this.windowResize=null,this.fullscreenEnteredListener=null,this.innerHolder=null,this.turnMeOnHolder=null,this.holder.innerHTML="",this.holder=null},this.addInterface=function(){this.holder.innerHTML=this.htmlTemplate,this.addNavButtonsToDom(V360Util.getFirstElementByClassName(this.holder,"View360-navigation")),-1!=this.config.mode.indexOf("lightbox")&&this.addCloseToDom(V360Util.getFirstElementByClassName(this.holder,"View360-closeHolder")),this.innerHolder=V360Util.getFirstElementByClassName(this.holder,"View360-holder"),this.turnMeOnHolder=V360Util.getFirstElementByClassName(this.holder,"View360-turnMeOnHolder"),this.turnMeOnHolder.style.display="none";var t=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationFullscreenExit");t.style.display="none";for(var i=V360Util.getElementsByClassName(this.innerHolder,"View360-navigationBtn"),e=0;e<i.length;e++)i[e].style.width=this.navigationConfig.btnWidth+"px",i[e].style.height=this.navigationConfig.btnHeight+"px",i[e].style.backgroundSize=this.navigationConfig.btnImageSize+" "+this.navigationConfig.btnImageSize,"custom"==this.navigationConfig.type?i[e].style.borderRadius=this.navigationConfig.cornerRadius+"px":"round"==this.navigationConfig.type&&(i[e].style.borderRadius=this.navigationConfig.btnWidth/2+"px"),void 0!==this.navigationConfig.btnMargin&&(i[e].style.marginLeft=this.navigationConfig.btnMargin+"px"),"vertical"==this.navigationConfig.orientation&&"none"!=i[e].style.display&&(i[e].style.display="block");var s=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigation"),n=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationHolder");s.style.textAlign=this.navigationConfig.align,"vertical"==this.navigationConfig.orientation&&("left"==this.navigationConfig.align?n.style.right="auto":"right"==this.navigationConfig.align&&(n.style.left="auto"));var o=this;this.bindBtn("View360-navigationFullscreenEnter","click",function(t){t.target;V360Util.getFirstElementByClassName(o.innerHolder,"View360-navigationFullscreenEnter").style.display="none",V360Util.getFirstElementByClassName(o.innerHolder,"View360-navigationFullscreenExit").style.display="inline-block",o.addFullScreenEvents();var i=document.documentElement,e=i.requestFullScreen||i.webkitRequestFullScreen||i.mozRequestFullScreen||i.msRequestFullscreen,s=o.isAllowedFS();e&&s?e.call(i):(o.isFullscreen=!0,o.windowResize())}),this.bindBtn("View360-navigationFullscreenExit","click",this.exitFullscreenBtnHandler.bind(this))},this.exitFullscreenBtnHandler=function(){V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationFullscreenEnter").style.display="inline-block",V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationFullscreenExit").style.display="none",this.addFullScreenEvents();var t=document,i=t.exitFullscreen||t.webkitCancelFullScreen||t.webkitExitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen,e=this.isAllowedFS();i&&e?i.call(t):(this.isFullscreen=!1,this.windowResize())},this.close=function(){clearInterval(this.rememberInertiaInterval),clearInterval(this.autoRotateInterval),clearInterval(this.responsiveInterval),clearInterval(this.inertiaAutoMoveInterval),this.holder.innerHTML=""},this.isAllowedFS=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},this.bindBtn=function(t,i,e){var s=V360Util.getFirstElementByClassName(this.innerHolder,t);V360Util.addEvent(s,i,function(t){e(t)},!1)},this.bindEvents=function(){var t=this;if(this.clickableAreaObj=V360Util.getFirstElementByClassName(this.innerHolder,"View360-clickableArea"),this.mouseDownHandlerListener=function(i){i.preventDefault(),t.mouseDownHandler(i.pageX,i.pageY)},V360Util.addEvent(this.clickableAreaObj,"mousedown",this.mouseDownHandlerListener,!1),V360Util.addEvent(this.clickableAreaObj,"click",function(t){t.stopPropagation()},!1),this.touchStartHandlerListener=function(i){t.mouseDownHandler(i.touches[0].pageX,i.touches[0].pageY)},V360Util.addEvent(this.clickableAreaObj,"touchstart",this.touchStartHandlerListener,!1),this.navigationHolder=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationHolder"),this.navigationHolder.style.visibility="hidden",this.navigationConfig.showButtons){var i=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationRotate");this.navigationConfig.showTool&&this.navigationConfig.showRotate&&this.navigationConfig.showButtons?(this.navigationHandHandlerListener=function(i){t.setMoveMode("ROTATE")},V360Util.addEvent(i,"click",this.navigationHandHandlerListener,!1)):i.style.display="none";var e=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationHand");this.navigationConfig.showTool&&this.navigationConfig.showMove&&this.navigationConfig.showButtons?(this.navigationHandHandlerListener=function(i){t.setMoveMode("PAN")},V360Util.addEvent(e,"click",this.navigationHandHandlerListener,!1)):e.style.display="none";var s=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationPlay");this.navigationConfig.showPlay&&this.navigationConfig.showButtons?(this.navigationPlayHandlerListener=function(i){t.startAutoRotate(void 0,void 0,!0)},V360Util.addEvent(s,"click",this.navigationPlayHandlerListener,!1)):s.style.display="none";var n=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationPause");this.navigationConfig.showPause&&this.navigationConfig.showButtons?(this.navigationPauseHandlerListener=function(i){t.stopAutoRotate()},V360Util.addEvent(n,"click",this.navigationPauseHandlerListener,!1)):n.style.display="none";var o=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationZoomIn");this.navigationConfig.showZoom&&this.navigationConfig.showButtons?(this.navigationZoomInHandlerListener=function(i){t.zoomIn()},V360Util.addEvent(o,"click",this.navigationZoomInHandlerListener,!1)):o.style.display="none";var a=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationZoomOut");this.navigationConfig.showZoom&&this.navigationConfig.showButtons?(this.navigationZoomOutHandlerListener=function(i){t.zoomOut()},V360Util.addEvent(a,"click",this.navigationZoomOutHandlerListener,!1)):a.style.display="none";var l=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationTurnLeft");this.navigationConfig.showTurn&&this.navigationConfig.showButtons?(this.navigationTurnLeftMouseDownHandlerListener=function(i){t.startAutoRotate(-1,t.navigationConfig.turnSpeed),V360Util.addEvent(document,"mouseup",function(){t.stopAutoRotate()},!1),V360Util.addEvent(document,"touchend",function(){t.stopAutoRotate()},!1)},V360Util.addEvent(l,"mousedown",this.navigationTurnLeftMouseDownHandlerListener,!1),V360Util.addEvent(l,"touchstart",this.navigationTurnLeftMouseDownHandlerListener,!1)):l.style.display="none";var r=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationTurnRight");this.navigationConfig.showTurn&&this.navigationConfig.showButtons?(this.navigationTurnLeftMouseDownHandlerListener=function(i){t.startAutoRotate(1,t.navigationConfig.turnSpeed),V360Util.addEvent(document,"mouseup",function(){t.stopAutoRotate()},!1),V360Util.addEvent(document,"touchend",function(){t.stopAutoRotate()},!1)},V360Util.addEvent(r,"mousedown",this.navigationTurnLeftMouseDownHandlerListener,!1),V360Util.addEvent(r,"touchstart",this.navigationTurnLeftMouseDownHandlerListener,!1)):r.style.display="none";var h=V360Util.getFirstElementByClassName(this.innerHolder,"View360-navigationClose");h&&(this.navigationConfig.showClose?V360Util.addEvent(h,"click",function(i){t.isFullscreen?t.exitFullscreenBtnHandler():t.lightbox&&t.lightbox.close()},!1):h.style.display="none"),this.navigationConfig.showFullscreen&&this.navigationConfig.showButtons||(V360Util.getFirstElementByClassName(t.innerHolder,"View360-navigationFullscreenEnter").style.display="none",V360Util.getFirstElementByClassName(t.innerHolder,"View360-navigationFullscreenExit").style.display="none")}},this.zoomIn=function(){for(var t=0;t<this.config.zoomMultipliers.length;t++)if(this.config.zoomMultipliers[t]>this.currentZoom){this.setZoom(this.config.zoomMultipliers[t]);break}},this.zoomOut=function(){for(var t=this.config.zoomMultipliers.length-1;t>=0;t--)if(this.config.zoomMultipliers[t]<this.currentZoom){this.setZoom(this.config.zoomMultipliers[t]);break}},this.setZoom=function(t,i){this.currentZoom=t,i||this.displayImageByIdx(this.latestImageIdx),this.zoomChanged=!0,1==this.currentZoom?this.pauseFullSizeImageLoader():this.config.loadFullSizeImagesOnZoom===!1||(this.config.loadFullSizeImagesOnZoom===!0?this.startFullSizeImageLoader():this.currentZoom>=this.config.loadFullSizeImagesOnZoom&&this.startFullSizeImageLoader())},this.startFullSizeImageLoader=function(){if(this.config.fullSizeImagesDirectory&&""!=this.config.fullSizeImagesDirectory){var t=this;if(!this.fullSizeLoaderInfo){this.fullSizeLoaderInfo=new this.fullSizeLoaderInfoClass(V360Util.getFirstElementByClassName(this.innerHolder,"View360-fullSizeLoaderHolder")),this.fullSizeLoaderInfo.setConfig(this.fullSizeLoaderInfoConfig);var i=new View360Loader,e=function(i){t.fullSizeLoaderInfo.setPercent(i.percent)},s=function(t,i,e){},n=function(i,e){i==t._getFullSizeImageByIdx(t.latestImageIdx)&&t.displayCurrentImage()},o=function(i,e){t.fullSizeLoaderInfo.hide(),t.fullSizeImages=i,t.displayCurrentImage()};i.setCallbackOne(s),i.setCallbackAll(o),i.setCallbackEach(n),i.setCallbackProgress(e),i.setSources(this.sources),i.setDirectory(this.config.fullSizeImagesDirectory),i.start(),t.fullSizeImages=i.getImages(),this.fullSizeLoaderInfo.show()}}},this.pauseFullSizeImageLoader=function(){},this.unbindEvents=function(){},this.autoRotateInterval=null,this.startAutoRotate=function(t,i,e){this._isPlayBtn=e,this._oneLoopCount=0,i=i?i:this.config.autoRotateSpeed,this.stopAutoRotate();var s=this;this.autoRotateInterval=setInterval(function(){s.autoRotatePaused||s.autoRotateFunc(t)},i)},this.stopAutoRotate=function(){clearInterval(this.autoRotateInterval)},this.autoCreateImages=function(){if(this.config.autoLoadImages){var t=this.config.imagesPattern;this.config.images=new Array,this.sources=new Array;for(var i=0;i<this.config.rows;i++){this.config.images[i]=new Array;for(var e=0;e<this.config.columns;e++){this.config.images[e]||(this.config.images[e]=new Array);var s=e;this.config.opositeDirection===!0&&(s=this.config.columns-e-1);var s=s+this.config.imagesNumbering,n=i;this.config.opositeDirectionUpDown===!0&&(n=this.config.rows-i-1);var n=n+this.config.imagesNumberingUpDown,o=t.replace("%ROW",n).replace("%COL",s),o=o.replace("%R%",V360Util.pad(n,1)).replace("%C%",V360Util.pad(s,1)),o=o.replace("%RR%",V360Util.pad(n,2)).replace("%CC%",V360Util.pad(s,2)),o=o.replace("%RRR%",V360Util.pad(n,3)).replace("%CCC%",V360Util.pad(s,3));this.config.images[e].push(o),this.sources.push(o)}}}},this.calculate=function(){this.rows=0,this.cols=0,this.config.images instanceof Array&&(this.config.images[0]&&this.config.images[0]instanceof Array?(this.rows=this.config.images[0].length,this.cols=this.config.images.length):(this.rows=this.config.images.length,this.cols=1)),this.totalImages=this.rows*this.cols},this.responsiveResize=function(){if(!this.disableResponsive&&this.responsiveConst){var t=this.holder.offsetWidth;if(t==this.latestRWidth)return;var i=Math.round(t*this.responsiveConst);this.holder.style.height=i+"px",this.config.width=t,this.config.height=i,this.latestRWidth=t,this.updateCanvasSize(),this.displayCurrentImage()}},this.responsiveFitResize=function(){if(!this.disableResponsive){var t=this.holder.offsetWidth,i=this.holder.offsetHeight;(t!=this.latestRWidth||i!=this.latestRHeight)&&(this.config.width=t,this.config.height=i,this.latestRWidth=t,this.latestRHeight=i,this.updateCanvasSize(),this.displayCurrentImage())}},this.resizeResponsiveByImage=function(t){
var i=this.holder.offsetWidth;this.responsiveConst=t.height/t.width;var e=Math.round(i*this.responsiveConst);this.holder.style.height=e+"px",this.config.height=e,this.updateCanvasSize()},this.resizeResponsiveFitByImage=function(t){this.holder.offsetWidth,this.holder.offsetHeight;this.updateCanvasSize()},this.updateCanvasSize=function(){V360Util.setAttribute(this.canvas,"width",this.config.width),V360Util.setAttribute(this.canvas,"height",this.config.height),this.canvasHolder.style.width=this.config.width+"px",this.canvasHolder.style.height=this.config.height+"px",this.innerHolder.style.width=this.config.width+"px",this.innerHolder.style.height=this.config.height+"px",void 0!==this.latestImageIdx?this.displayImageByIdx(this.latestImageIdx):void 0!==this.noOneImage&&this.displayImage(this.noOneImage,this.config.firstImageOpacity)},this.lightboxCloseHandler=function(){this.destroy()},this.responsiveInterval=null,this.currentZoom=1,this.start=function(t){this.config.loaderShow&&(this.loaderInfoClass=View360LoadingInfo_New,this.fullSizeLoaderInfoClass=View360LoadingInfo_New,this.loaderInfoConfig.loaderShow=this.config.loaderShow,this.loaderInfoConfig.loaderColor=this.config.loaderColor,this.loaderInfoConfig.loaderClassname=this.config.loaderClassname);var i=this;this.holder=t,("lightbox-responsive"==this.config.mode||"lightbox-css"==this.config.mode)&&(this.lightbox=new View360Lightbox,this.lightbox.closeCallback=this.lightboxCloseHandler.bind(this),this.lightbox.setConfig(this.config),this.holder=document.createElement("div"),this.lightbox.setContent(this.holder),this.lightbox.open()),"lightbox"==this.config.mode?(this.lightbox=new View360Lightbox,this.lightbox.closeCallback=this.lightboxCloseHandler.bind(this),this.lightbox.setConfig(this.config),this.holder=document.createElement("div"),this.lightbox.setContent(this.holder),this.lightbox.open()):"fit"==this.config.mode?(this.config.width=this.holder.offsetWidth,this.config.height=this.holder.offsetHeight):"fullscreen"==this.config.mode?(this.holder=document.createElement("div"),this.holder.style.position="fixed",this.holder.top="0px",this.holder.left="0px",document.body.appendChild(this.holder),this.config.width=window.innerWidth,this.config.height=window.innerHeight):"responsive"==this.config.mode||"responsive-width"==this.config.mode?(clearInterval(this.responsiveInterval),this.responsiveInterval=setInterval(function(){i.responsiveResize()},500),this.config.width=this.holder.offsetWidth,this.config.height=this.holder.offsetHeight):"responsive-fit"==this.config.mode||"lightbox-responsive"==this.config.mode||"lightbox-css"==this.config.mode?(this.holder.style.top="0px",this.holder.style.left="0px",this.holder.style.bottom="0px",this.holder.style.right="0px",this.holder.style.position="absolute",this.holder.style.overflow="hidden",clearInterval(this.responsiveInterval),this.responsiveInterval=setInterval(function(){i.config.width=i.holder.offsetWidth,i.config.height=i.holder.offsetHeight,i.responsiveFitResize()},500),this.config.width=this.holder.offsetWidth,this.config.height=this.holder.offsetHeight):"fixed"==this.config.mode,setTimeout(function(){i._timeout=!0},29e3),this.currentZoom=1,this.panMoveX=0,this.panMoveY=0,this.autoCreateImages(),this.calculate(),this.addInterface(),this.bindEvents(),i.smallLoaded=!1,this.loaderInfo=new this.loaderInfoClass(V360Util.getFirstElementByClassName(this.innerHolder,"View360-loaderHolder")),this.loaderInfo.setConfig(this.loaderInfoConfig),this.loaderInfo.show();var e=this.sources,s=this.canvas=V360Util.getFirstElementByClassName(this.innerHolder,"View360-canvas");this.canvasHolder=V360Util.getFirstElementByClassName(this.innerHolder,"View360-canvasHolder");i.updateCanvasSize(),this.ctx=s.getContext("2d");var n=new View360Loader,o=function(t){i.loaderInfo.setPercent(t.percent)},a=function(t,e){e||("responsive"==i.config.mode||"responsive-width"==i.config.mode?i.resizeResponsiveByImage(t):"responsive-fit"==i.config.mode&&i.resizeResponsiveFitByImage(t),i.displayImage(t,.5),i.noOneImage=t)},l=function(t,e){i.smallLoaded=!0,i.loaderInfo.hide(),i.config.showTurnMeOn&&(i.turnMeOnHolder.style.display="block"),i.navigationConfig.showButtons?i.navigationHolder.style.visibility="visible":i.navigationHolder.style.display="none",i.images=t,i.displayImageByIdx(i.config.initialImage),i.currentCol=i.config.initialImage,i.config.autoRotate?i.startAutoRotate():i.config.oneTurnOnStartUp&&i.startInertiaAutoMoveInterval(!0)};if(n.setCallbackOne(a,e[this.config.initialImage]),n.setCallbackAll(l),n.setCallbackProgress(o),n.setSources(e),n.setDirectory(this.config.imagesDirectory),this.config.loadOnPageLoad)if(this.config.loadFirstImage&&n.loadOne(),"complete"===document.readyState)n.start();else var r=setInterval(function(){"complete"===document.readyState&&(clearInterval(r),i.config.loadFirstImage||n.loadOne(),n.start())},200);else n.loadOne(),n.start()},this.setConfig=function(t){for(var i in t)this.config[i]=t[i]},this.setNavigationConfig=function(t){for(var i in t)this.navigationConfig[i]=t[i]},this.setProperty=function(t,i){this.config[t]=i},this.setMode=function(t){this.setProperty("mode",t)},this.setFitMode=function(t){this.setProperty("fitmode",t)},this.setImagesPattern=function(t){this.setProperty("imagesPattern",t)},this.setImagesDirectory=function(t){this.setProperty("imagesDirectory",t)},this.setFullSizeImagesDirectory=function(t){this.setProperty("fullSizeImagesDirectory",t)},this.setHtmlTemplate=function(t){this.htmlTemplate=t},this.setLoaderInfoClass=function(t){this.loaderInfoClass=t},this.setLoaderInfoConfig=function(t){this.loaderInfoConfig=t},this.setFullSizeLoaderInfoClass=function(t){this.fullSizeLoaderInfoClass=t},this.setFullSizeLoaderInfoConfig=function(t){this.fullSizeLoaderInfoConfig=t},this.loadPreset=function(t){var i=this;V360Util.loadJSON(t,function(t){i.loaderInfoClass=View360LoadingInfo_New,i.fullSizeLoaderInfoClass=View360LoadingInfo_New,i.loaderInfoConfig.loaderShow=t.v360config.loaderShow,i.loaderInfoConfig.loaderColor=t.v360config.loaderColor,i.loaderInfoConfig.loaderClassname=t.v360config.loaderClassname,i.setConfig(t.v360config),i.setNavigationConfig(t.v360navigation),i.setImagesDirectory((i.consObj.basepath?i.consObj.basepath+"/":"")+i.consObj.product),i.start(V360Util.getElementById(i.consObj.id))},function(t){console.log("View360: Load preset failed.")})},this.consObj&&this.consObj.preset&&this.loadPreset((this.consObj.basepath?this.consObj.basepath+"/":"")+this.consObj.preset)};V360Util=new View360UtilStatic;var View360LoadingInfo_New=function(t){this.holder=t,this.config={loaderShow:!0,loaderColor:"#dddddd",loaderClassname:"ball-pulse"},this.getHTMLTemplate=function(){var t=" ";t+="",t+="    <style>",t+="        .View360-loaderInnerHolder > .load-container > .loader > div > div{",t+="            background: "+this.config.loaderColor+";",t+="        }",t+="        .View360-loaderInnerHolder > .load-container > .loader{",t+="            margin-left: -50%;",t+="           margin-top: -50%;",t+="        }",t+="        .View360-loaderInnerHolder > .load-container  {",t+="            top: 50%;",t+="            position: absolute;",t+="            left: 50%;",t+="        }",t+="    </style>",t+='            <div class="View360-loaderInnerHolder">  ',t+='            <div class="View360-loaderBackground"></div>  ',t+='                    <div class="loaders load-container">';var i=this.config.loaderClassname;return"ball-pulse"==i?t+='<div class="loader"><div class="ball-pulse"><div></div><div></div><div></div></div></div>':"ball-grid-pulse"==i?t+='<div class="loader"><div class="ball-grid-pulse"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>':"square-spin"==i?t+='<div class="loader"><div class="square-spin"><div></div></div></div>':"ball-pulse-rise"==i?t+='<div class="loader"><div class="ball-pulse-rise"><div></div><div></div><div></div><div></div><div></div></div></div>':"ball-rotate"==i?t+='<div class="loader"><div class="ball-rotate"><div></div></div></div>':"cube-transition"==i?t+='<div class="loader"><div class="cube-transition"><div></div><div></div></div></div>':"ball-zig-zag"==i?t+='<div class="loader"><div class="ball-zig-zag"><div></div><div></div></div></div>':"ball-zig-zag-deflect"==i?t+='<div class="loader"><div class="ball-zig-zag-deflect"><div></div><div></div></div></div>':"ball-triangle-path"==i?t+='<div class="loader"><div class="ball-triangle-path"><div></div><div></div><div></div></div></div>':"ball-scale"==i?t+='<div class="loader"><div class="ball-scale"><div></div></div></div>':"line-scale"==i?t+='<div class="loader"><div class="line-scale"><div></div><div></div><div></div><div></div><div></div></div></div>':"line-scale-party"==i?t+='<div class="loader"><div class="line-scale-party"><div></div><div></div><div></div><div></div></div></div>':"ball-scale-multiple"==i?t+='<div class="loader"><div class="ball-scale-multiple"><div></div><div></div><div></div></div></div>':"ball-pulse-sync"==i?t+='<div class="loader"><div class="ball-pulse-sync"><div></div><div></div><div></div></div></div>':"ball-beat"==i?t+='<div class="loader"><div class="ball-beat"><div></div><div></div><div></div></div></div>':"line-scale-pulse-out"==i?t+='<div class="loader"><div class="line-scale-pulse-out"><div></div><div></div><div></div><div></div><div></div></div></div>':"line-scale-pulse-out-rapid"==i?t+='<div class="loader"><div class="line-scale-pulse-out-rapid"><div></div><div></div><div></div><div></div><div></div></div></div>':"ball-scale-ripple"==i?t+='<div class="loader"><div class="ball-scale-ripple"><div></div></div></div>':"ball-scale-ripple-multiple"==i?t+='<div class="loader"><div class="ball-scale-ripple-multiple"><div></div><div></div><div></div></div></div>':"ball-spin-fade-loader"==i?t+='<div class="loader"><div class="ball-spin-fade-loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>':"line-spin-fade-loader"==i?t+='<div class="loader"><div class="line-spin-fade-loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>':"ball-grid-beat"==i&&(t+='<div class="loader"><div class="ball-grid-beat"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>'),t+="</div>",t+="    </div>  ",t+="    "},this.initializeInterface=function(){this.holder.innerHTML=this.getHTMLTemplate()},this.destroyInterface=function(){this.holder.innerHTML=""},this.setPercent=function(t){},this.setConfig=function(t){for(var i in t)this.config[i]=t[i]},this.show=function(){this.config.loaderShow&&this.initializeInterface()},this.hide=function(){this.config.loaderShow&&this.destroyInterface()},this.drawPercent=function(t){}},View360LoadingInfo=function(t){this.holder=t,this.config={display:!0,holderClassName:null,loadingTitle:null,loadingSubtitle:null,loadingMessage:null,modalBackground:"#FFF",modalOpacity:.5,circleWidth:"70",circleLineWidth:"10",circleLineColor:"#555",circleBackgroundColor:"#FFF"},this.htmlTemplate=" ",this.htmlTemplate+='    <div class="View360-loaderInnerHolder">  ',this.htmlTemplate+='        <div class="View360-loaderBackground"></div>  ',this.htmlTemplate+='        <div class="View360-loader">  ',this.htmlTemplate+='             <div class="View360-loadingTitle"></div>  ',this.htmlTemplate+='             <div class="View360-loadingSubtitle"></div>  ',this.htmlTemplate+='             <div class="View360-loadingMessage"></div>  ',this.htmlTemplate+='             <div class="View360-visual">  ',this.htmlTemplate+='                 <div class="View360-visualHolder">  ',this.htmlTemplate+='                    <canvas class="View360-visualCanvas" width="80" height="80"></canvas>  ',this.htmlTemplate+='                    <div class="View360-percentHolder">  ',this.htmlTemplate+='                        <div class="View360-percent"></div>  ',this.htmlTemplate+="                    </div>  ",this.htmlTemplate+="                </div>  ",this.htmlTemplate+="             </div>  ",this.htmlTemplate+="        </div>  ",this.htmlTemplate+="    </div>  ",this.htmlTemplate+="    ",this.setHtmlByClassOrHide=function(t,i){var e=V360Util.getFirstElementByClassName(this.holder,t);e&&(i&&""!=i?e.innerHTML=i:e.style.display="none")},this.initializeInterface=function(){this.holder.innerHTML=this.htmlTemplate,this.config.holderClassName&&(this.holder.className+=" "+this.config.holderClassName),this.setHtmlByClassOrHide("View360-loadingTitle",this.config.loadingTitle),this.setHtmlByClassOrHide("View360-loadingSubtitle",this.config.loadingSubtitle),this.setHtmlByClassOrHide("View360-loadingMessage",this.config.loadingMessage),this.canvas=V360Util.getFirstElementByClassName(this.holder,"View360-visualCanvas"),V360Util.setAttribute(this.canvas,"width",this.config.circleWidth),V360Util.setAttribute(this.canvas,"height",this.config.circleWidth),this.percentHolder=V360Util.getFirstElementByClassName(this.holder,"View360-percentHolder"),this.percentHolder.style.width=this.config.circleWidth+"px",this.percentHolder.style.height=this.config.circleWidth+"px",this.percent=V360Util.getFirstElementByClassName(this.holder,"View360-percent"),this.percent.style.width=this.config.circleWidth+"px",this.percent.style.height=this.config.circleWidth+"px",this.loaderInnerHolder=V360Util.getFirstElementByClassName(this.holder,"View360-loaderBackground"),this.loaderInnerHolder.style.background=this.config.modalBackground,this.loaderInnerHolder.style.opacity=this.config.modalOpacity,this.percentEl=V360Util.getFirstElementByClassName(this.holder,"View360-percent")},this.destroyInterface=function(){this.percentEl=null,this.loaderInnerHolder=null,this.holder.innerHTML=""},this.setPercent=function(t){this.config.display&&this.percentEl&&this.drawPercent(t)},this.setConfig=function(t){for(var i in t)this.config[i]=t[i]},this.show=function(){this.config.display&&this.initializeInterface()},this.hide=function(){this.config.display&&this.destroyInterface()},this.drawPercent=function(t){try{this.percentEl.innerHTML=t+"%";var i=t/100,e=this.canvas.getContext("2d"),s=this.canvas.width/2,n=this.canvas.height/2,o=(this.canvas.width-this.config.circleLineWidth)/2,a=2*Math.PI,l=Math.PI/2;e.lineWidth=this.config.circleLineWidth,e.strokeStyle=this.config.circleLineColor,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor="#656565",e.clearRect(0,0,this.canvas.width,this.canvas.height),e.arc(s,n,Math.max(0,o-this.config.circleLineWidth/2),0,2*Math.PI,!1),e.fillStyle=this.config.circleBackgroundColor,e.fill(),e.beginPath(),e.arc(s,n,Math.max(0,o),-l,a*i-l,!1),e.stroke()}catch(r){}}},View360Lightbox=function(){this.config={width:"800",height:"600",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",mode:"fixed"},this.setConfig=function(t){for(var i in t)this.config[i]=t[i]},this.open=function(){this.addInterface()},this.close=function(){this.removeInterface()},this.addInterface=function(){this.modalBackground=document.createElement("div"),V360Util.setAttribute(this.modalBackground,"id","View360-modalBackground"),document.body.appendChild(this.modalBackground),this.lighboxOuter=document.createElement("div"),this.lighboxOuter.style.top=window.pageYOffset+"px",V360Util.setAttribute(this.lighboxOuter,"id","View360-lighboxOuter"),document.body.appendChild(this.lighboxOuter),this.lighbox=document.createElement("div"),V360Util.setAttribute(this.lighbox,"id","View360-lighbox"),this.lighboxOuter.appendChild(this.lighbox),"lightbox-responsive"==this.config.mode?(this.lighbox.style.maxWidth=this.config.width+"px",this.lighbox.style.maxHeight=this.config.height+"px",this.lighbox.style.top=this.config.paddingTop,this.lighbox.style.left=this.config.paddingLeft,this.lighbox.style.bottom=this.config.paddingBottom,this.lighbox.style.right=this.config.paddingRight):"lightbox-css"==this.config.mode||(this.lighbox.style.width=this.config.width+"px",this.lighbox.style.height=this.config.height+"px"),this.lighbox.appendChild(this.content);var t=this;this.modalClickHandlerListener=function(i){("View360-lighboxOuter"==i.target.getAttribute("id")||"View360-modalBackground"==i.target.getAttribute("id"))&&t.close()},V360Util.addEvent(this.modalBackground,"mousedown",this.modalClickHandlerListener,!1),V360Util.addEvent(this.lighboxOuter,"mousedown",this.modalClickHandlerListener,!1)},this.setContent=function(t){this.content=t},this.removeInterface=function(){V360Util.removeEvent(this.lighboxOuter,"mousedown",this.modalClickHandlerListener),this.removeElement(this.lighbox),this.removeElement(this.lighboxOuter),this.removeElement(this.modalBackground),this.lighbox=null,this.lighboxOuter=null,this.modalBackground=null,this.closeCallback&&this.closeCallback(),this.closeCallback=null},this.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}};